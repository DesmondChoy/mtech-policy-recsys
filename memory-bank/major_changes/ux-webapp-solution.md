# Major Change: Customer-Focused UX Web App for Policy Recommendation System

## Background & Diagnosis

### Pain Points Identified
- **Limited User Interaction:** Existing system lacks an intuitive, user-friendly interface for customers to engage with recommendation reports.
- **Fragmented Experience:** Customers currently receive reports in a static format (PDF/email), making it hard to compare, trace, or interact with recommendations.
- **Mobile Accessibility:** No optimized solution for users on mobile devices.
- **Transparency:** Customers have limited visibility into the reasoning behind recommendations or access to raw supporting documents.

### Diagnosis
- The absence of a centralized, interactive, and mobile-friendly interface reduces engagement, trust, and usability for end customers.
- Customers need a way to:
  - Easily log in and access their personalized reports
  - Interactively compare policy recommendations
  - Review the rationale (transcripts) and supporting documents (PDFs)
  - Take further actions (feedback, contact advisor, etc.)

## Solution: Responsive Web App (MVP)

### Key Features
- **Landing Page with Login Simulation:**
  - Customer logs in by selecting their ID from a drop-down menu (MVP simplification).
  - After login, user is presented with their personalized dashboard.
- **Chrome-Style Tabbed Report Interface:**
  - Immediately present the user's most recent (or only) recommendation report in a main content area
  - Provide a browser-like tab bar at the top (inspired by Chrome), with tabs for:
    - Recommendation (streaming content)
    - Policy Comparison
    - Chat Transcript
    - Raw PDFs
- **Feedback & Next Steps:**
  - Simple feedback widget (thumbs up/down, comments).
  - Contact advisor button for further queries.
- **Mobile-First Design:**
  - Responsive layouts, touch-friendly navigation, and PWA features for mobile usability.

### Tech Stack Recommendation
- **Frontend:** React (with Material UI or Chakra UI), React Router
- **Backend (if needed):** FastAPI (Python) or Express.js (Node.js), but not required for MVP if data exists
- **Other:** PWA support for mobile, local launch via terminal command, no deployment needed

---

## Summary
This major change introduces a customer-focused, mobile-friendly web app to address the pain points of limited interactivity, fragmented experience, and lack of transparency. The solution leverages a simple login simulation, a Chrome-style tabbed report interface, and an interactive report viewer, all built on a modern, responsive tech stack. This will significantly improve customer engagement, trust, and usability for the policy recommendation system.

---

### Integration with Existing System

- The web app will directly interface with the projectâ€™s structured outputs (customer requirements, policy data, comparison reports) generated by the current Python pipelines.
- No mock data is required; customer selection will surface real, dynamically loaded data.
- This ensures the UI is always in sync with the latest backend intelligence and evaluations.

### Customer Journey (User Stories)

- **User Story 1:**  
  As a customer, I select my ID, view my personalized dashboard, and access detailed policy comparison reports, including the reasoning and original documents.
- **User Story 2:**  
  As a customer, I can open the original transcript and policy PDF to verify or share with an advisor.

### MVP Scope and Future Enhancements

- **MVP:** Focuses on report viewing, comparison, and transparency.
- **Future:** Plans for direct feedback, iterative refinement, and conversational UI.

### Accessibility & Internationalization

- The UI will be designed with accessibility in mind (keyboard navigation, screen reader support).
- Multi-language support will be considered for broader reach.

---

**Suggestions Incorporated:**
- Linked UI to project architecture and data flow
- Highlighted transparency, trust, and real data integration
- Added user stories for clarity
- Clarified MVP scope and future vision
- Noted accessibility and internationalization

---

### Implementation Plan: Step-by-Step Checklist

#### 1. Project Setup
- [x] Create a new feature branch for the UX web app (e.g., `ux-webapp`)
- [x] Set up the React project with Vite or Create React App
- [x] Install dependencies (Material UI/Chakra UI, React Router, etc.)
- [x] Configure project structure (components, pages, assets, utils)

#### 2. Data Integration Preparation
- [x] Implement utility functions to load real data from the backend/scripts/output folders
- [x] Define interfaces/types for structured data (TypeScript)
- [x] Update customer ID drop-down to use real customer IDs from results folder (each folder name is a customer UUID)
- [x] Utility: Add function to extract customer IDs from results folder (and optionally from data/transcripts/raw/synthetic JSON filenames)
- [ ] Identify and document the data sources (customer IDs, requirements, policies, reports) in the codebase for maintainability

#### 3. Landing & Login Simulation
- [x] Design landing page layout (mobile-first)
- [x] Implement initial customer ID drop-down login component (placeholder data)
- [ ] Create logic to load the Chrome-style tabbed report interface upon selection

#### 4. Chrome-Style Tabbed Report Interface (Post-Login)
- [ ] After selecting a customer ID (UUID) and clicking Continue, immediately present the user's most recent (or only) recommendation report in a main content area
- [ ] Provide a browser-like tab bar at the top (inspired by Chrome), with tabs for:
    - Recommendation (streaming content from `results/{uuid}/recommendation_report_{uuid}.md`)
    - Policy Comparison (dropdown to select insurer, renders `results/{uuid}/policy_comparison_report_{insurer}.md`)
    - Customer Requirements (renders `data/extracted_customer_requirements/requirements_{scenario}_{uuid}.json` as pretty JSON)
    - Transcript (renders `data/transcripts/raw/synthetic/transcript_{scenario}_{uuid}.json` as pretty JSON or formatted chat)
    - Policy PDFs (shows all four insurer PDFs from `data/policies/raw/`, one per insurer, with viewer or download option)
- [ ] All tabs pertain to the selected customer context (UUID) except Policy PDFs, which are global
- [ ] Animate or stream recommendation content for a dynamic feel (typewriter effect or similar)
- [ ] Prominently display a 'Switch Customer' button in the AppBar

#### 5. Tab Content Details
- [ ] **Recommendation Tab:** Render Markdown as rich text from the appropriate file
- [ ] **Policy Comparison Tab:** Dropdown menu for insurer selection; render selected Markdown file as rich text
- [ ] **Customer Requirements Tab:** Render JSON as pretty-printed, rich text
- [ ] **Transcript Tab:** Render JSON as pretty-printed, rich text or chat timeline
- [ ] **Policy PDFs Tab:** Display all four insurer PDFs (one per insurer) using an embedded PDF viewer or download link; deduplicate if multiple files per insurer

#### 6. Feedback & Contact
- [ ] Add feedback widget (thumbs up/down, comments)
- [ ] Implement contact advisor button/modal

#### 7. Mobile & Accessibility
- [ ] Test and refine mobile responsiveness (all screens)
- [ ] Add accessibility features (keyboard navigation, ARIA labels, screen reader support)

#### 8. Quality & Testing
- [ ] Write unit and integration tests for key components
- [ ] Conduct end-to-end walkthroughs (customer journey)
- [ ] Fix bugs and polish UI/UX

#### 9. Documentation & Handover
- [ ] Document setup, usage, and key design decisions in README
- [ ] Update Memory Bank with implementation notes and lessons learned

---

**Data Mapping Summary:**
- **Customer ID (UUID):** Used for all file lookups per customer
- **Recommendation:** `results/{uuid}/recommendation_report_{uuid}.md`
- **Policy Comparison:** `results/{uuid}/policy_comparison_report_{insurer}.md` (dropdown for insurer)
- **Customer Requirements:** `data/extracted_customer_requirements/requirements_{scenario}_{uuid}.json`
- **Transcript:** `data/transcripts/raw/synthetic/transcript_{scenario}_{uuid}.json`
- **Policy PDFs:** All four PDFs from `data/policies/raw/` (one per insurer, shown for any customer)

**Rendering:**
- Markdown and JSON files are rendered as rich text (Markdown viewer, pretty JSON)
- PDFs are displayed using an embedded PDF viewer
